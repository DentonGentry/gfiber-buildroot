From f9e600f5412e4fcc7a773dba31a1c5f8d9899d63 Mon Sep 17 00:00:00 2001
From: Avery Pennarun <apenwarr@gmail.com>
Date: Fri, 24 Jan 2014 04:39:24 -0500
Subject: [PATCH 01/11] HACK: ath10k: always set power level to 0 dBm.

On our device, if we set it any higher, it currently causes distortion.  We
need to figure out why that is, but for now, this is a workaround.
---
 drivers/net/wireless/ath/ath10k/mac.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/drivers/net/wireless/ath/ath10k/mac.c b/drivers/net/wireless/ath/ath10k/mac.c
index 9c676a3..31a71f9 100644
--- a/drivers/net/wireless/ath/ath10k/mac.c
+++ b/drivers/net/wireless/ath/ath10k/mac.c
@@ -2429,6 +2429,9 @@ static int ath10k_config(struct ieee80211_hw *hw, u32 changed)
 				    hw->conf.power_level, ret);
 
 		param = ar->wmi.pdev_param->txpower_limit5g;
+		printk("power level: %d\n", hw->conf.power_level);
+		hw->conf.power_level = 0;
+		printk("HACK: new power level: %d\n", hw->conf.power_level);
 		ret = ath10k_wmi_pdev_set_param(ar, param,
 						hw->conf.power_level * 2);
 		if (ret)
-- 
1.9.0.279.gdc9e3eb

